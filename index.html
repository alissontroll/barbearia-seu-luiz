<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Barbearia Seu Luiz</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --dark: #0f0f0f; --card-bg: #1a1a1a; --accent: #c9a84c;
    --accent2: #e8c97a; --teal: #2dd4bf; --text: #f0ece4; --muted: #888;
  }
  body { background: var(--dark); color: var(--text); font-family: "DM Sans", sans-serif; min-height: 100vh; display: flex; justify-content: center; padding: 0 16px 60px; }
  body::before { content: ""; position: fixed; inset: 0; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E"); pointer-events: none; z-index: 0; opacity: 0.5; }
  .glow-bg { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); width: 500px; height: 500px; background: radial-gradient(ellipse, rgba(201,168,76,0.12) 0%, transparent 70%); pointer-events: none; z-index: 0; }
  .container { position: relative; z-index: 1; width: 100%; max-width: 480px; }
  .header { display: flex; flex-direction: column; align-items: center; padding: 52px 0 36px; animation: fadeDown 0.7s ease both; }
  .avatar-wrap { position: relative; width: 110px; height: 110px; margin-bottom: 20px; cursor: pointer; }
  .avatar-wrap::before { content: ""; position: absolute; inset: -4px; border-radius: 50%; background: conic-gradient(var(--accent), var(--accent2), #a07830, var(--accent)); animation: spin 8s linear infinite; }
  .avatar-wrap::after { content: ""; position: absolute; inset: -2px; border-radius: 50%; background: var(--dark); }
  .avatar-wrap img { position: relative; z-index: 1; width: 100%; height: 100%; border-radius: 50%; object-fit: cover; object-position: center 15%; }
  h1 { font-family: "Playfair Display", serif; font-size: clamp(26px,7vw,34px); font-weight: 900; letter-spacing: -0.5px; margin-bottom: 6px; }
  h1 span { color: var(--accent); }
  .subtitle { font-size: 14px; font-weight: 300; color: var(--muted); text-align: center; line-height: 1.5; }
  .socials { display: flex; gap: 14px; margin-top: 20px; }
  .social-btn { width: 40px; height: 40px; border-radius: 50%; border: 1px solid rgba(201,168,76,0.3); background: rgba(201,168,76,0.07); display: flex; align-items: center; justify-content: center; color: var(--accent); text-decoration: none; transition: all 0.25s; }
  .social-btn:hover { background: rgba(201,168,76,0.18); border-color: var(--accent); transform: scale(1.08); }
  .divider { display: flex; align-items: center; gap: 12px; margin: 4px 0 20px; opacity: 0.25; }
  .divider::before, .divider::after { content: ""; flex: 1; height: 1px; background: var(--accent); }
  .divider span { font-size: 10px; letter-spacing: 3px; color: var(--accent); }
  .cards { display: flex; flex-direction: column; gap: 12px; }
  .card-link { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.06); border-radius: 16px; display: flex; align-items: center; gap: 16px; padding: 16px 20px; text-decoration: none; color: var(--text); transition: all 0.25s; animation: fadeUp 0.5s ease both; }
  .card-link:hover { border-color: rgba(201,168,76,0.35); transform: translateY(-2px); box-shadow: 0 8px 32px rgba(0,0,0,0.4); }
  .card-featured { background: linear-gradient(135deg, #0d2b2b, #0f1f1f); border: 1px solid rgba(45,212,191,0.3); border-radius: 16px; display: flex; flex-direction: column; gap: 12px; padding: 20px 22px; text-decoration: none; color: var(--text); transition: all 0.25s; animation: fadeUp 0.5s ease both; }
  .card-featured:hover { border-color: var(--teal); box-shadow: 0 8px 32px rgba(0,0,0,0.4), 0 0 24px rgba(45,212,191,0.08); }
  .card-aval { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.06); border-radius: 16px; animation: fadeUp 0.5s ease 0.3s both; }
  .aval-header { display: flex; align-items: center; gap: 16px; padding: 16px 20px; cursor: pointer; user-select: none; }
  .aval-body { overflow: hidden; max-height: 0; transition: max-height 0.4s ease, padding 0.3s ease; padding: 0 16px; }
  .aval-body.aberto { max-height: 1200px; padding: 0 16px 16px; }
  .aval-inner { display: flex; flex-direction: column; gap: 12px; }
  .icon-wrap { width: 44px; height: 44px; border-radius: 12px; background: rgba(201,168,76,0.1); display: flex; align-items: center; justify-content: center; flex-shrink: 0; font-size: 20px; }
  .card-content { flex: 1; }
  .card-title { font-size: 15px; font-weight: 500; margin-bottom: 2px; }
  .card-sub { font-size: 12px; color: var(--muted); font-weight: 300; }
  .arrow { color: var(--muted); font-size: 20px; margin-left: auto; flex-shrink: 0; transition: transform 0.3s; }
  .arrow.aberto { transform: rotate(90deg); }
  .featured-days { display: flex; gap: 8px; flex-wrap: wrap; }
  .day-pill { background: rgba(45,212,191,0.12); border: 1px solid rgba(45,212,191,0.35); color: var(--teal); border-radius: 20px; padding: 5px 14px; font-size: 12px; font-weight: 500; }
  .featured-desc { font-size: 13px; color: #aaa; line-height: 1.5; }
  .badge { background: var(--teal); color: #0a1f1f; font-size: 10px; font-weight: 700; letter-spacing: 1px; padding: 3px 8px; border-radius: 6px; text-transform: uppercase; }
  .aval-form { background: rgba(255,255,255,0.04); border-radius: 12px; padding: 14px; border: 1px solid rgba(255,255,255,0.07); display: flex; flex-direction: column; gap: 8px; }
  .aval-form p { font-size: 13px; color: #ccc; font-weight: 500; }
  .estrelas-wrap { display: flex; gap: 6px; font-size: 28px; cursor: pointer; }
  .estrelas-wrap span { color: #444; transition: color 0.1s; }
  .aval-form input, .aval-form textarea { width: 100%; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 9px 12px; color: var(--text); font-size: 13px; outline: none; font-family: inherit; resize: none; }
  .aval-form input::placeholder, .aval-form textarea::placeholder { color: #555; }
  .btn-enviar { width: 100%; background: var(--accent); color: #0f0f0f; border: none; border-radius: 8px; padding: 11px; font-size: 13px; font-weight: 700; cursor: pointer; font-family: inherit; letter-spacing: 0.5px; transition: background 0.2s; }
  .btn-enviar:hover { background: var(--accent2); }
  .lista-aval { display: flex; flex-direction: column; gap: 8px; }
  .aval-item { background: rgba(255,255,255,0.04); border-radius: 10px; padding: 12px; border: 1px solid rgba(255,255,255,0.06); }
  .aval-item-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 3px; }
  .aval-item-nome { font-size: 13px; font-weight: 500; }
  .aval-item-data { font-size: 11px; color: #555; }
  .aval-item-stars { color: #f5c518; font-size: 14px; margin-bottom: 4px; }
  .aval-item-texto { font-size: 12px; color: #aaa; line-height: 1.5; }
  .aval-item-resposta { font-size: 12px; color: var(--accent); background: rgba(201,168,76,0.07); border-left: 2px solid var(--accent); padding: 6px 10px; border-radius: 0 6px 6px 0; margin-top: 6px; }
  .footer { text-align: center; margin-top: 40px; font-size: 12px; color: #444; letter-spacing: 1px; }

  /* ---- AVISO CARD ---- */
  .card-aviso { border-radius: 14px; padding: 14px 18px; margin-bottom: 0; animation: fadeUp 0.5s ease both; display: none; }
  .card-aviso.visivel { display: flex; align-items: flex-start; gap: 12px; }
  .aviso-texto { font-size: 13px; line-height: 1.5; flex: 1; }

  /* ---- HORARIOS CARD ---- */
  .card-horarios { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.06); border-radius: 16px; padding: 16px 20px; animation: fadeUp 0.5s ease both; display: none; }
  .card-horarios.visivel { display: block; }
  .horario-row { display: flex; justify-content: space-between; font-size: 13px; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.04); }
  .horario-row:last-child { border-bottom: none; }
  .horario-dia { color: var(--muted); }
  .horario-hora { font-weight: 500; }
  .horario-fechado { color: #555; }

  /* ---- SERVICOS CARD ---- */
  .card-servicos { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.06); border-radius: 16px; animation: fadeUp 0.5s ease both; display: none; }
  .card-servicos.visivel { display: block; }
  .servicos-header { display: flex; align-items: center; gap: 16px; padding: 16px 20px; cursor: pointer; user-select: none; }
  .servicos-body { overflow: hidden; max-height: 0; transition: max-height 0.4s ease; padding: 0 16px; }
  .servicos-body.aberto { max-height: 800px; padding: 0 16px 16px; }
  .servico-item { display: flex; justify-content: space-between; align-items: center; padding: 9px 0; border-bottom: 1px solid rgba(255,255,255,0.04); font-size: 13px; }
  .servico-item:last-child { border-bottom: none; }
  .servico-nome { color: var(--text); }
  .servico-preco { color: var(--accent); font-weight: 600; }

  /* ---- CONTATO CARD ---- */
  .card-contato { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.06); border-radius: 16px; display: none; }
  .card-contato.visivel { display: block; }
  .contato-header { display: flex; align-items: center; gap: 16px; padding: 16px 20px; cursor: pointer; user-select: none; }
  .contato-body { overflow: hidden; max-height: 0; transition: max-height 0.4s ease; padding: 0 16px; }
  .contato-body.aberto { max-height: 600px; padding: 0 16px 16px; }
  .contato-form { display: flex; flex-direction: column; gap: 8px; }
  .contato-form input, .contato-form textarea { width: 100%; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 9px 12px; color: var(--text); font-size: 13px; outline: none; font-family: inherit; resize: none; }
  .contato-form input::placeholder, .contato-form textarea::placeholder { color: #555; }

  @keyframes fadeDown { from { opacity:0; transform:translateY(-20px); } to { opacity:1; transform:translateY(0); } }
  @keyframes fadeUp { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }
  @keyframes spin { to { transform:rotate(360deg); } }

  /* ===== ADMIN PANEL ===== */
  #admin-login-overlay { display: none; position: fixed; inset: 0; z-index: 9999; background: rgba(0,0,0,0.85); backdrop-filter: blur(6px); align-items: center; justify-content: center; }
  #admin-login-overlay.show { display: flex; }
  .admin-login-box { background: #1a1a1a; border: 1px solid rgba(201,168,76,0.3); border-radius: 20px; padding: 32px 28px; width: 90%; max-width: 340px; display: flex; flex-direction: column; gap: 14px; box-shadow: 0 20px 60px rgba(0,0,0,0.6); }
  .admin-login-box h2 { font-family: "Playfair Display", serif; font-size: 20px; color: var(--accent); text-align: center; }
  .admin-login-box p { font-size: 12px; color: #555; text-align: center; }
  .admin-login-box input { width: 100%; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); border-radius: 10px; padding: 11px 14px; color: var(--text); font-size: 14px; outline: none; font-family: inherit; }
  .admin-login-box input:focus { border-color: rgba(201,168,76,0.5); }
  .btn-admin-enter { width: 100%; background: var(--accent); color: #0f0f0f; border: none; border-radius: 10px; padding: 12px; font-size: 14px; font-weight: 700; cursor: pointer; font-family: inherit; transition: background 0.2s; }
  .btn-admin-enter:hover { background: var(--accent2); }
  .btn-admin-enter:disabled { background: #333; color: #666; cursor: not-allowed; }
  .btn-admin-cancel { width: 100%; background: transparent; color: #555; border: 1px solid rgba(255,255,255,0.08); border-radius: 10px; padding: 10px; font-size: 13px; cursor: pointer; font-family: inherit; transition: all 0.2s; }
  .btn-admin-cancel:hover { color: #888; }

  #admin-panel { display: none; position: fixed; inset: 0; z-index: 9998; background: #0d0d0d; overflow-y: auto; padding: 24px 16px 80px; }
  #admin-panel.show { display: block; }
  .admin-wrap { max-width: 480px; margin: 0 auto; }
  .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid rgba(201,168,76,0.2); }
  .admin-header h2 { font-family: "Playfair Display", serif; color: var(--accent); font-size: 22px; }
  .btn-admin-logout { background: rgba(255,60,60,0.1); color: #ff6060; border: 1px solid rgba(255,60,60,0.3); border-radius: 8px; padding: 7px 14px; font-size: 12px; cursor: pointer; font-family: inherit; transition: all 0.2s; }
  .btn-admin-logout:hover { background: rgba(255,60,60,0.2); }

  /* ADMIN TABS */
  .admin-tabs { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 20px; }
  .admin-tab { background: #1a1a1a; border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 7px 12px; font-size: 12px; cursor: pointer; font-family: inherit; color: #888; transition: all 0.2s; }
  .admin-tab.ativo { background: rgba(201,168,76,0.15); border-color: rgba(201,168,76,0.4); color: var(--accent); }
  .admin-section { display: none; }
  .admin-section.ativo { display: block; }
  .admin-section-title { font-size: 11px; letter-spacing: 2px; color: #555; text-transform: uppercase; margin-bottom: 12px; margin-top: 20px; }
  .admin-section-title:first-child { margin-top: 0; }

  /* STATS GRID */
  .admin-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
  .admin-stat { background: #1a1a1a; border: 1px solid rgba(255,255,255,0.07); border-radius: 12px; padding: 14px 16px; }
  .admin-stat-val { font-size: 28px; font-weight: 700; color: var(--accent); }
  .admin-stat-label { font-size: 11px; color: #555; margin-top: 2px; }

  /* ADMIN FORMS */
  .admin-input { width: 100%; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 10px 14px; color: var(--text); font-size: 13px; outline: none; font-family: inherit; margin-bottom: 8px; }
  .admin-input:focus { border-color: rgba(201,168,76,0.4); }
  .admin-textarea { width: 100%; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 10px 14px; color: var(--text); font-size: 13px; outline: none; font-family: inherit; resize: none; margin-bottom: 8px; }
  .admin-textarea:focus { border-color: rgba(201,168,76,0.4); }
  .btn-admin-save { background: var(--accent); color: #0f0f0f; border: none; border-radius: 10px; padding: 11px 20px; font-size: 13px; font-weight: 700; cursor: pointer; font-family: inherit; transition: background 0.2s; }
  .btn-admin-save:hover { background: var(--accent2); }
  .btn-admin-danger { background: rgba(255,60,60,0.1); color: #ff6060; border: 1px solid rgba(255,60,60,0.25); border-radius: 8px; padding: 7px 14px; font-size: 12px; cursor: pointer; font-family: inherit; transition: all 0.2s; }
  .btn-admin-danger:hover { background: rgba(255,60,60,0.2); }
  .admin-select { width: 100%; background: #222; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; padding: 10px 14px; color: var(--text); font-size: 13px; outline: none; font-family: inherit; margin-bottom: 8px; }

  /* AVALIA√á√ïES ADMIN */
  .admin-aval-item { background: #1a1a1a; border: 1px solid rgba(255,255,255,0.07); border-radius: 12px; padding: 14px 16px; display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; margin-bottom: 8px; }
  .admin-aval-info { flex: 1; }
  .admin-aval-nome { font-size: 14px; font-weight: 600; margin-bottom: 2px; }
  .admin-aval-stars { color: #f5c518; font-size: 13px; margin-bottom: 4px; }
  .admin-aval-texto { font-size: 12px; color: #aaa; margin-bottom: 4px; }
  .admin-aval-meta { font-size: 11px; color: #444; }
  .admin-aval-resposta-area { margin-top: 8px; display: flex; gap: 6px; }
  .admin-aval-resposta-area input { flex: 1; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 7px 10px; color: var(--text); font-size: 12px; outline: none; font-family: inherit; }
  .btn-responder { background: rgba(201,168,76,0.15); color: var(--accent); border: 1px solid rgba(201,168,76,0.3); border-radius: 8px; padding: 7px 12px; font-size: 12px; cursor: pointer; font-family: inherit; white-space: nowrap; }
  .aval-actions { display: flex; flex-direction: column; gap: 6px; }

  /* SERVICOS ADMIN */
  .admin-servico-item { background: #1a1a1a; border: 1px solid rgba(255,255,255,0.07); border-radius: 10px; padding: 12px 14px; display: flex; justify-content: space-between; align-items: center; gap: 10px; margin-bottom: 6px; }
  .admin-servico-nome { font-size: 13px; font-weight: 500; }
  .admin-servico-preco { font-size: 13px; color: var(--accent); }

  /* MENSAGENS */
  .admin-msg-item { background: #1a1a1a; border: 1px solid rgba(255,255,255,0.07); border-radius: 12px; padding: 14px 16px; margin-bottom: 8px; }
  .admin-msg-nome { font-size: 14px; font-weight: 600; margin-bottom: 2px; }
  .admin-msg-texto { font-size: 13px; color: #ccc; margin: 6px 0 4px; line-height: 1.5; }
  .admin-msg-meta { font-size: 11px; color: #444; }
  .admin-msg-novo { border-color: rgba(45,212,191,0.3); }

  /* ALERTAS */
  .admin-alerta-item { background: rgba(255,60,60,0.07); border: 1px solid rgba(255,60,60,0.2); border-radius: 12px; padding: 14px 16px; margin-bottom: 8px; }
  .admin-alerta-num { font-size: 11px; color: #ff7070; font-weight: 700; margin-bottom: 4px; letter-spacing: 1px; }
  .admin-alerta-detalhe { font-size: 13px; color: #ccc; margin-bottom: 2px; }
  .admin-alerta-hora { font-size: 11px; color: #555; }

  .admin-empty { text-align: center; color: #444; font-size: 13px; padding: 24px 0; }
  .badge-novo { background: var(--teal); color: #0a1f1f; font-size: 10px; font-weight: 700; letter-spacing: 1px; padding: 2px 7px; border-radius: 6px; text-transform: uppercase; margin-left: 6px; }
  .color-picker-row { display: flex; gap: 8px; align-items: center; margin-bottom: 8px; }
  .color-picker-row label { font-size: 12px; color: #888; }
  .aviso-preview { border-radius: 12px; padding: 12px 16px; font-size: 13px; margin-top: 8px; display: flex; gap: 10px; align-items: flex-start; }
  .admin-row { display: flex; gap: 8px; align-items: center; margin-bottom: 8px; }
  .admin-row label { font-size: 12px; color: #888; min-width: 60px; }
  .admin-row input[type=checkbox] { width: 16px; height: 16px; cursor: pointer; }
  .horario-edit-row { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 6px; align-items: center; margin-bottom: 6px; font-size: 12px; }
  .horario-edit-row input { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 7px 10px; color: var(--text); font-size: 12px; outline: none; font-family: inherit; width: 100%; }
  .horario-edit-row .dia-label { color: #888; padding: 0 4px; }
  .visitantes-chart { display: flex; gap: 4px; align-items: flex-end; height: 60px; margin: 10px 0; }
  .chart-bar-wrap { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 3px; }
  .chart-bar { width: 100%; background: rgba(201,168,76,0.3); border-radius: 4px 4px 0 0; min-height: 4px; transition: height 0.5s; }
  .chart-label { font-size: 9px; color: #555; }
</style>
</head>
<body>

<!-- Admin Login -->
<div id="admin-login-overlay">
  <div class="admin-login-box">
    <h2>üîê √Årea Admin</h2>
    <p>Acesso restrito ao propriet√°rio</p>
    <input type="text" id="admin-user-input" placeholder="Usu√°rio" autocomplete="off" onkeydown="if(event.key==='Enter')document.getElementById('admin-senha-input').focus()">
    <input type="password" id="admin-senha-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')tentarLoginAdmin()">
    <div id="admin-erro-msg" style="font-size:12px;color:#ff5555;text-align:center;min-height:16px;"></div>
    <button class="btn-admin-enter" id="btn-admin-enter" onclick="tentarLoginAdmin()">Entrar</button>
    <button class="btn-admin-cancel" onclick="fecharLoginAdmin()">Cancelar</button>
  </div>
</div>

<!-- Admin Panel -->
<div id="admin-panel">
  <div class="admin-wrap">
    <div class="admin-header">
      <h2>‚öôÔ∏è Painel Admin</h2>
      <button class="btn-admin-logout" onclick="logoutAdmin()">Sair</button>
    </div>

    <div class="admin-tabs">
      <button class="admin-tab ativo" onclick="mudarAba('stats')">üìä Estat√≠sticas</button>
      <button class="admin-tab" onclick="mudarAba('avals')">‚≠ê Avalia√ß√µes</button>
      <button class="admin-tab" onclick="mudarAba('aviso')">üì¢ Aviso</button>
      <button class="admin-tab" onclick="mudarAba('servicos')">‚úÇÔ∏è Servi√ßos</button>
      <button class="admin-tab" onclick="mudarAba('horarios')">üïê Hor√°rios</button>
      <button class="admin-tab" onclick="mudarAba('msgs')">üí¨ Mensagens</button>
      <button class="admin-tab" onclick="mudarAba('alertas')">üö® Invas√µes</button>
    </div>

    <!-- ESTAT√çSTICAS -->
    <div class="admin-section ativo" id="tab-stats">
      <div class="admin-section-title">Visitas ao site (√∫ltimos 7 dias)</div>
      <div class="visitantes-chart" id="chart-visitas"></div>
      <div class="admin-stats" id="admin-stats-grid"></div>
    </div>

    <!-- AVALIA√á√ïES -->
    <div class="admin-section" id="tab-avals">
      <div class="admin-section-title">Gerenciar Avalia√ß√µes</div>
      <div id="admin-aval-list"><div class="admin-empty">Carregando...</div></div>
    </div>

    <!-- AVISO -->
    <div class="admin-section" id="tab-aviso">
      <div class="admin-section-title">Comunicado para clientes</div>
      <p style="font-size:12px;color:#666;margin-bottom:12px;">O aviso aparece no topo do site para todos os visitantes.</p>
      <textarea class="admin-textarea" id="aviso-texto" rows="3" placeholder="Ex: Fechado na sexta dia 20. Feliz Natal! üéÑ"></textarea>
      <div class="color-picker-row">
        <label>Cor:</label>
        <select class="admin-select" id="aviso-cor" style="margin-bottom:0;">
          <option value="gold">üü° Dourado</option>
          <option value="teal">üü¢ Verde</option>
          <option value="red">üî¥ Vermelho</option>
          <option value="blue">üîµ Azul</option>
        </select>
        <label>√çcone:</label>
        <input class="admin-input" id="aviso-icone" style="width:70px;margin-bottom:0;" placeholder="üì¢" maxlength="4">
      </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:4px;">
        <button class="btn-admin-save" onclick="salvarAviso()">üíæ Publicar Aviso</button>
        <button class="btn-admin-danger" onclick="removerAviso()">üóë Remover Aviso</button>
      </div>
    </div>

    <!-- SERVI√áOS -->
    <div class="admin-section" id="tab-servicos">
      <div class="admin-section-title">Adicionar Servi√ßo</div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;">
        <input class="admin-input" id="srv-nome" placeholder="Nome do servi√ßo" style="flex:2;margin-bottom:0;">
        <input class="admin-input" id="srv-preco" placeholder="R$ 0,00" style="flex:1;margin-bottom:0;">
        <button class="btn-admin-save" onclick="adicionarServico()">+ Add</button>
      </div>
      <div class="admin-section-title" style="margin-top:20px;">Lista de Servi√ßos</div>
      <div id="admin-servicos-list"><div class="admin-empty">Carregando...</div></div>
    </div>

    <!-- HOR√ÅRIOS -->
    <div class="admin-section" id="tab-horarios">
      <div class="admin-section-title">Hor√°rio de Funcionamento</div>
      <div id="horarios-edit"></div>
      <button class="btn-admin-save" onclick="salvarHorarios()" style="margin-top:12px;width:100%;">üíæ Salvar Hor√°rios</button>
    </div>

    <!-- MENSAGENS -->
    <div class="admin-section" id="tab-msgs">
      <div class="admin-section-title">Mensagens dos Clientes <span id="msgs-badge"></span></div>
      <div id="admin-msgs-list"><div class="admin-empty">Nenhuma mensagem ainda.</div></div>
    </div>

    <!-- ALERTAS -->
    <div class="admin-section" id="tab-alertas">
      <div class="admin-section-title">Tentativas de Invas√£o</div>
      <div id="admin-alertas-list"><div class="admin-empty">Nenhuma tentativa registrada. ‚úÖ</div></div>
      <button class="btn-admin-danger" onclick="limparAlertas()" style="width:100%;margin-top:12px;">üóë Limpar hist√≥rico</button>
    </div>

  </div>
</div>

<div class="glow-bg"></div>
<div class="container">
  <div class="header">
    <div class="avatar-wrap" id="logo-secret">
      <img src="data:image/jpeg;base64,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" alt="Barbeiro Seu Luiz">
    </div>
    <h1>Barbearia <span>Seu Luiz</span></h1>
    <p class="subtitle">Especialista em atendimento<br>√† Neurodivergentes üß©</p>
    <div class="socials">
      <a href="https://www.instagram.com/barbeariaseuluiz1" target="_blank" class="social-btn" title="Instagram">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
      </a>
    </div>
  </div>

  <div class="divider"><span>‚ú¶ ‚ú¶ ‚ú¶</span></div>

  <!-- AVISO DIN√ÇMICO -->
  <div id="card-aviso-site" class="card-aviso" style="margin-bottom:12px;"></div>

  <div class="cards">
    <!-- Neurodivergente -->
    <a href="https://wa.me/5581995425522?text=Ol%C3%A1!%20Gostaria%20de%20agendar%20atendimento%20neurodivergente." class="card-featured" target="_blank">
      <div style="display:flex;align-items:center;gap:12px;">
        <div class="icon-wrap" style="background:rgba(45,212,191,0.1);">üß©</div>
        <div class="card-content">
          <div class="card-title" style="color:#2dd4bf;">Atendimento Neurodivergente</div>
          <div class="card-sub">Ambiente acolhedor e sem julgamentos</div>
        </div>
        <span class="badge">Novo</span>
      </div>
      <div class="featured-days"><span class="day-pill">Segunda-feira</span><span class="day-pill">Ter√ßa-feira</span></div>
      <div class="featured-desc">Sess√µes especializadas para crian√ßas e adultos autistas e neurodivergentes. Atendimento com calma, sem pressa e com toda a aten√ß√£o que voc√™ merece. ‚úÇÔ∏èüß°</div>
    </a>

    <!-- SERVI√áOS DIN√ÇMICOS -->
    <div class="card-servicos" id="card-servicos-site">
      <div class="servicos-header" onclick="toggleServicos()">
        <div class="icon-wrap" style="background:rgba(201,168,76,0.1);">‚úÇÔ∏è</div>
        <div class="card-content">
          <div class="card-title">Servi√ßos e Pre√ßos</div>
          <div class="card-sub">Clique para ver</div>
        </div>
        <span class="arrow" id="srv-arrow">‚Ä∫</span>
      </div>
      <div class="servicos-body" id="servicos-body">
        <div id="servicos-lista"></div>
      </div>
    </div>

    <!-- HOR√ÅRIOS DIN√ÇMICOS -->
    <div class="card-horarios" id="card-horarios-site">
      <div style="display:flex;align-items:center;gap:16px;margin-bottom:12px;">
        <div class="icon-wrap" style="background:rgba(201,168,76,0.1);">üïê</div>
        <div class="card-content">
          <div class="card-title">Hor√°rio de Funcionamento</div>
        </div>
      </div>
      <div id="horarios-lista"></div>
    </div>

    <!-- Agendamentos -->
    <a href="https://wa.me/5581995425522?text=Ol%C3%A1!%20Gostaria%20de%20agendar%20um%20hor%C3%A1rio%20na%20Barbearia%20Seu%20Luiz." class="card-link" target="_blank" style="animation-delay:0.1s;">
      <div class="icon-wrap" style="background:rgba(37,211,102,0.1);">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="#25d366"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 0 0-3.48-8.413z"/></svg>
      </div>
      <div class="card-content">
        <div class="card-title">Agendamentos</div>
        <div class="card-sub">Clique para agendar pelo WhatsApp</div>
      </div>
      <span class="arrow">‚Ä∫</span>
    </a>

    <!-- Como Chegar -->
    <a href="https://www.google.com/maps/search/?api=1&query=R.Cel.Manoel+Alves,+115,+Agrestina,+PE,+55495-000" class="card-link" target="_blank" style="animation-delay:0.2s;">
      <div class="icon-wrap" style="background:rgba(234,67,53,0.1);">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="#ea4335"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
      </div>
      <div class="card-content">
        <div class="card-title">Como Chegar</div>
        <div class="card-sub">R. Cel. Manoel Alves, 115 ‚Äî Agrestina, PE</div>
      </div>
      <span class="arrow">‚Ä∫</span>
    </a>

    <!-- CONTATO -->
    <div class="card-contato visivel" id="card-contato-site">
      <div class="contato-header" onclick="toggleContato()">
        <div class="icon-wrap" style="background:rgba(99,102,241,0.1);">üí¨</div>
        <div class="card-content">
          <div class="card-title">Fale Conosco</div>
          <div class="card-sub">Envie uma mensagem para a barbearia</div>
        </div>
        <span class="arrow" id="contato-arrow">‚Ä∫</span>
      </div>
      <div class="contato-body" id="contato-body">
        <div class="contato-form">
          <input type="text" id="msg-nome" placeholder="Seu nome">
          <input type="tel" id="msg-tel" placeholder="Seu WhatsApp (opcional)">
          <textarea id="msg-texto" rows="3" placeholder="Sua mensagem..."></textarea>
          <button class="btn-enviar" onclick="enviarMensagem()">Enviar Mensagem üí¨</button>
        </div>
      </div>
    </div>

    <!-- Avalia√ß√µes -->
    <div class="card-aval">
      <div class="aval-header" id="aval-header">
        <div class="icon-wrap" style="background:rgba(251,188,4,0.1);">‚≠ê</div>
        <div class="card-content">
          <div class="card-title">Avalia√ß√µes dos Clientes</div>
          <div class="card-sub" id="avg-display">Seja o primeiro a avaliar!</div>
        </div>
        <span class="arrow" id="aval-arrow">‚Ä∫</span>
      </div>
      <div class="aval-body" id="aval-body">
        <div class="aval-inner">
          <div class="lista-aval" id="lista-aval"></div>
          <div class="aval-form">
            <p>Deixe sua avalia√ß√£o:</p>
            <div class="estrelas-wrap" id="estrelas">
              <span data-n="1">‚òÜ</span><span data-n="2">‚òÜ</span><span data-n="3">‚òÜ</span><span data-n="4">‚òÜ</span><span data-n="5">‚òÜ</span>
            </div>
            <input type="text" id="inp-nome" placeholder="Seu nome">
            <textarea id="inp-comentario" rows="2" placeholder="Conte como foi sua experi√™ncia..."></textarea>
            <button class="btn-enviar" id="btn-enviar">Enviar Avalia√ß√£o ‚úì</button>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div class="footer"><p>‚ú¶ Barbearia Seu Luiz ‚ú¶</p></div>
</div>

<script>
// These functions must be in regular (non-module) scope to work with onclick=
function toggleServicos() {
  document.getElementById('servicos-body').classList.toggle('aberto');
  document.getElementById('srv-arrow').classList.toggle('aberto');
}
function toggleContato() {
  document.getElementById('contato-body').classList.toggle('aberto');
  document.getElementById('contato-arrow').classList.toggle('aberto');
}
function toggleDiaFechado(i) {
  var fechado = document.getElementById('h-fechado-' + i).checked;
  document.getElementById('h-abre-' + i).disabled = fechado;
  document.getElementById('h-fecha-' + i).disabled = fechado;
}
function mudarAba(aba) {
  document.querySelectorAll('.admin-section').forEach(function(s){ s.classList.remove('ativo'); });
  document.querySelectorAll('.admin-tab').forEach(function(t){ t.classList.remove('ativo'); });
  document.getElementById('tab-' + aba).classList.add('ativo');
  event.target.classList.add('ativo');
}
function tentarLoginAdmin() { if(window._tentarLoginAdmin) window._tentarLoginAdmin(); }
function fecharLoginAdmin() { if(window._fecharLoginAdmin) window._fecharLoginAdmin(); }
function logoutAdmin() { if(window._logoutAdmin) window._logoutAdmin(); }
function salvarAviso() { if(window._salvarAviso) window._salvarAviso(); }
function removerAviso() { if(window._removerAviso) window._removerAviso(); }
function adicionarServico() { if(window._adicionarServico) window._adicionarServico(); }
function deletarServico(btn) { if(window._deletarServico) window._deletarServico(btn); }
function deletarAvaliacao(btn) { if(window._deletarAvaliacao) window._deletarAvaliacao(btn); }
function responderAval(btn) { if(window._responderAval) window._responderAval(btn); }
function deletarMsg(btn) { if(window._deletarMsg) window._deletarMsg(btn); }
function marcarLida(btn) { if(window._marcarLida) window._marcarLida(btn); }
function limparAlertas() { if(window._limparAlertas) window._limparAlertas(); }
function salvarHorarios() { if(window._salvarHorarios) window._salvarHorarios(); }
function enviarMensagem() { if(window._enviarMensagem) window._enviarMensagem(); }
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, push, set, onValue, remove, update } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBA86BTuJqr_2p_x6lUPwTqKtmcToXuZI8",
  authDomain: "barbearia-seu-luiz.firebaseapp.com",
  databaseURL: "https://barbearia-seu-luiz-default-rtdb.firebaseio.com",
  projectId: "barbearia-seu-luiz",
  storageBucket: "barbearia-seu-luiz.firebasestorage.app",
  messagingSenderId: "254797360192",
  appId: "1:254797360192:web:e340fb2ddeb6d6085ec3a5"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const avaliacoesRef = ref(db, 'avaliacoes');
const alertasRef    = ref(db, 'alertas_admin');
const servicosRef   = ref(db, 'servicos');
const horariosRef   = ref(db, 'horarios');
const avisoRef      = ref(db, 'aviso');
const msgsRef       = ref(db, 'mensagens');
const visitasRef    = ref(db, 'visitas');

// Expose everything globally so onclick= attributes work
window._db = db;
window._ref = ref;
window._push = push;
window._set = set;
window._onValue = onValue;
window._remove = remove;
window._update = update;
window._refs = { avaliacoesRef, alertasRef, servicosRef, horariosRef, avisoRef, msgsRef, visitasRef };

// ===== RASTREAR VISITA =====
(function() {
  var hoje = new Date().toISOString().slice(0,10);
  var visitaHojeRef = ref(db, 'visitas/' + hoje);
  onValue(visitaHojeRef, function(snap) {
    set(visitaHojeRef, (snap.val() || 0) + 1);
  }, { onlyOnce: true });
})();

// ===== ADMIN LOGIN =====
var ADMIN_USER = "Everton";
var ADMIN_SENHA = "luiz2025@";
var MAX_TENTATIVAS = 3;
var BLOQUEIO_MINUTOS = 30;
var tentativas = 0;
var bloqueadoAte = null;
var logoClicks = 0;
var logoTimer = null;

document.getElementById('logo-secret').addEventListener('click', function() {
  logoClicks++;
  clearTimeout(logoTimer);
  logoTimer = setTimeout(function() { logoClicks = 0; }, 2000);
  if (logoClicks >= 5) { logoClicks = 0; abrirLoginAdmin(); }
});

function abrirLoginAdmin() {
  if (bloqueadoAte && Date.now() < bloqueadoAte) {
    var mins = Math.ceil((bloqueadoAte - Date.now()) / 60000);
    mostrarErro('üîí Bloqueado! Tente em ' + mins + ' min.');
    document.getElementById('btn-admin-enter').disabled = true;
  } else {
    document.getElementById('btn-admin-enter').disabled = false;
    mostrarErro('');
  }
  document.getElementById('admin-login-overlay').classList.add('show');
  setTimeout(function(){ document.getElementById('admin-user-input').focus(); }, 100);
}

function mostrarErro(msg) { document.getElementById('admin-erro-msg').textContent = msg; }

window._tentarLoginAdmin = function() {
  if (bloqueadoAte && Date.now() < bloqueadoAte) {
    mostrarErro('üîí Bloqueado por mais ' + Math.ceil((bloqueadoAte - Date.now()) / 60000) + ' min.');
    return;
  }
  var user  = document.getElementById('admin-user-input').value.trim();
  var senha = document.getElementById('admin-senha-input').value;
  if (user === ADMIN_USER && senha === ADMIN_SENHA) {
    tentativas = 0; bloqueadoAte = null;
    document.getElementById('admin-login-overlay').classList.remove('show');
    document.getElementById('admin-user-input').value = '';
    document.getElementById('admin-senha-input').value = '';
    mostrarErro('');
    document.getElementById('admin-panel').classList.add('show');
    carregarAdminPanel();
  } else {
    tentativas++;
    var senhaDigitada = senha;
    document.getElementById('admin-senha-input').value = '';
    push(alertasRef, { usuario_digitado: user||'(vazio)', senha_digitada: senhaDigitada||'(vazia)', tentativa_num: tentativas, timestamp: Date.now(), data: new Date().toLocaleString('pt-BR') });
    if (tentativas >= MAX_TENTATIVAS) {
      bloqueadoAte = Date.now() + BLOQUEIO_MINUTOS * 60000;
      document.getElementById('btn-admin-enter').disabled = true;
      mostrarErro('üîí Acesso bloqueado por ' + BLOQUEIO_MINUTOS + ' minutos!');
      document.getElementById('admin-user-input').value = '';
    } else {
      mostrarErro('‚ùå Incorreto. ' + (MAX_TENTATIVAS - tentativas) + ' tentativa(s) restante(s).');
    }
  }
};

window._fecharLoginAdmin = function() {
  document.getElementById('admin-login-overlay').classList.remove('show');
  document.getElementById('admin-user-input').value = '';
  document.getElementById('admin-senha-input').value = '';
  mostrarErro('');
};

window._logoutAdmin = function() { document.getElementById('admin-panel').classList.remove('show'); };

// ===== ABAS ADMIN =====
window._mudarAba = function(aba) {
  document.querySelectorAll('.admin-section').forEach(function(s){ s.classList.remove('ativo'); });
  document.querySelectorAll('.admin-tab').forEach(function(t){ t.classList.remove('ativo'); });
  document.getElementById('tab-' + aba).classList.add('ativo');
  event.target.classList.add('ativo');
};

// ===== CARREGAR PAINEL =====
function carregarAdminPanel() {
  carregarStats();
  carregarAdminAvals();
  carregarAdminServicos();
  carregarAdminHorarios();
  carregarAdminMsgs();
  carregarAlertas();
  carregarAvisoAdmin();
}

// ===== ESTAT√çSTICAS =====
function carregarStats() {
  onValue(visitasRef, function(snap) {
    var dados = snap.val() || {};
    var dias = [];
    for (var i = 6; i >= 0; i--) {
      var d = new Date(); d.setDate(d.getDate() - i);
      var key = d.toISOString().slice(0,10);
      dias.push({ label: d.toLocaleDateString('pt-BR', {weekday:'short'}), val: dados[key] || 0, key: key });
    }
    var total = Object.values(dados).reduce(function(a,b){ return a+b; }, 0);
    var hoje = dados[new Date().toISOString().slice(0,10)] || 0;
    var maxVal = Math.max.apply(null, dias.map(function(d){ return d.val; })) || 1;

    var chart = document.getElementById('chart-visitas');
    chart.innerHTML = dias.map(function(d) {
      var h = Math.max(4, Math.round((d.val / maxVal) * 56));
      return '<div class="chart-bar-wrap"><div class="chart-bar" style="height:' + h + 'px;background:' + (d.val ? 'rgba(201,168,76,0.6)' : 'rgba(255,255,255,0.06)') + '"></div><div class="chart-label">' + d.label + '</div></div>';
    }).join('');

    onValue(avaliacoesRef, function(snap2) {
      var numAvals = snap2.exists() ? Object.keys(snap2.val()).length : 0;
      var media = 0;
      if (snap2.exists()) {
        var vals = Object.values(snap2.val());
        media = (vals.reduce(function(s,a){ return s + a.estrelas; }, 0) / vals.length).toFixed(1);
      }
      onValue(msgsRef, function(snap3) {
        var numMsgs = snap3.exists() ? Object.keys(snap3.val()).length : 0;
        document.getElementById('admin-stats-grid').innerHTML =
          stat('üëÅ', hoje, 'Visitas Hoje') +
          stat('üìÖ', total, 'Total de Visitas') +
          stat('‚≠ê', media || '‚Äî', 'M√©dia Avalia√ß√µes') +
          stat('‚≠ê', numAvals, 'Total Avalia√ß√µes') +
          stat('üí¨', numMsgs, 'Mensagens');
      }, { onlyOnce: true });
    }, { onlyOnce: true });
  }, { onlyOnce: true });
}

function stat(icon, val, label) {
  return '<div class="admin-stat"><div class="admin-stat-val">' + val + '</div><div class="admin-stat-label">' + icon + ' ' + label + '</div></div>';
}

// ===== AVALIA√á√ïES =====
function carregarAdminAvals() {
  var listEl = document.getElementById('admin-aval-list');
  onValue(avaliacoesRef, function(snapshot) {
    var lista = [];
    if (snapshot.exists()) {
      snapshot.forEach(function(child) { var item = child.val(); item._key = child.key; lista.push(item); });
      lista.sort(function(a,b){ return b.timestamp - a.timestamp; });
    }
    if (!lista.length) { listEl.innerHTML = '<div class="admin-empty">Nenhuma avalia√ß√£o ainda.</div>'; return; }
    listEl.innerHTML = lista.map(function(a) {
      var dt = a.timestamp ? new Date(a.timestamp).toLocaleString('pt-BR') : a.data;
      return '<div class="admin-aval-item" id="ai-' + a._key + '">' +
        '<div class="admin-aval-info">' +
          '<div class="admin-aval-nome">' + esc(a.nome) + '</div>' +
          '<div class="admin-aval-stars">' + '‚òÖ'.repeat(a.estrelas) + '‚òÜ'.repeat(5-a.estrelas) + '</div>' +
          (a.comentario ? '<div class="admin-aval-texto">' + esc(a.comentario) + '</div>' : '') +
          (a.resposta ? '<div style="font-size:12px;color:var(--accent);margin-top:4px;">üí¨ Resposta: ' + esc(a.resposta) + '</div>' : '') +
          '<div class="admin-aval-meta">üïê ' + dt + '</div>' +
          '<div class="admin-aval-resposta-area">' +
            '<input id="resp-' + a._key + '" data-key="' + a._key + '" placeholder="Responder esta avalia√ß√£o..." value="' + (a.resposta ? esc(a.resposta) : '') + '">' +
            '<button class="btn-responder" onclick="responderAval(this)" data-key="' + a._key + '">Salvar</button>' +
          '</div>' +
        '</div>' +
        '<div class="aval-actions">' +
          '<button class="btn-admin-danger" onclick="deletarAvaliacao(this)" data-key="' + a._key + '">üóë</button>' +
        '</div>' +
      '</div>';
    }).join('');
  });
}

window._deletarAvaliacao = function(btn) {
  var key = btn.dataset.key;
  if (!confirm('Deletar esta avalia√ß√£o?')) return;
  remove(ref(db, 'avaliacoes/' + key));
};

window._responderAval = function(btn) {
  var key = btn.dataset.key;
  var resp = document.getElementById('resp-' + key).value.trim();
  update(ref(db, 'avaliacoes/' + key), { resposta: resp });
};

// ===== AVISO =====
function carregarAvisoAdmin() {
  onValue(avisoRef, function(snap) {
    if (snap.exists()) {
      var d = snap.val();
      document.getElementById('aviso-texto').value = d.texto || '';
      document.getElementById('aviso-icone').value = d.icone || 'üì¢';
    }
  }, { onlyOnce: true });
}

window._salvarAviso = function() {
  var texto = document.getElementById('aviso-texto').value.trim();
  if (!texto) { alert('Digite um texto para o aviso!'); return; }
  var cor = document.getElementById('aviso-cor').value;
  var icone = document.getElementById('aviso-icone').value || 'üì¢';
  set(avisoRef, { texto: texto, cor: cor, icone: icone, ativo: true }).then(function(){ alert('Aviso publicado! ‚úÖ'); });
};

window._removerAviso = function() {
  remove(avisoRef).then(function(){ alert('Aviso removido!'); });
};

// ===== SERVI√áOS =====
function carregarAdminServicos() {
  onValue(servicosRef, function(snap) {
    var listEl = document.getElementById('admin-servicos-list');
    if (!snap.exists()) { listEl.innerHTML = '<div class="admin-empty">Nenhum servi√ßo cadastrado.</div>'; return; }
    var lista = [];
    snap.forEach(function(child) { var item = child.val(); item.key = child.key; lista.push(item); });
    listEl.innerHTML = lista.map(function(s) {
      return '<div class="admin-servico-item">' +
        '<span class="admin-servico-nome">' + esc(s.nome) + '</span>' +
        '<span class="admin-servico-preco">' + esc(s.preco) + '</span>' +
        '<button class="btn-admin-danger" onclick="deletarServico(this)" data-key="' + s.key + '">üóë</button>' +
      '</div>';
    }).join('');
  });
}

window._adicionarServico = function() {
  var nome = document.getElementById('srv-nome').value.trim();
  var preco = document.getElementById('srv-preco').value.trim();
  if (!nome || !preco) { alert('Preencha nome e pre√ßo!'); return; }
  push(servicosRef, { nome: nome, preco: preco }).then(function() {
    document.getElementById('srv-nome').value = '';
    document.getElementById('srv-preco').value = '';
  });
};

window._deletarServico = function(btn) {
  var key = btn.dataset.key;
  if (!confirm('Remover servi√ßo?')) return;
  remove(ref(db, 'servicos/' + key));
};

// ===== HOR√ÅRIOS =====
var DIAS = ['Segunda','Ter√ßa','Quarta','Quinta','Sexta','S√°bado','Domingo'];
var horariosAtual = {};

function carregarAdminHorarios() {
  onValue(horariosRef, function(snap) {
    horariosAtual = snap.val() || {};
    var html = DIAS.map(function(dia, i) {
      var d = horariosAtual[dia] || { aberto: true, abre: '08:00', fecha: '18:00' };
      return '<div class="horario-edit-row">' +
        '<span class="dia-label">' + dia + '</span>' +
        '<input type="time" id="h-abre-' + i + '" value="' + (d.abre||'08:00') + '" ' + (d.aberto===false?'disabled':'') + '>' +
        '<input type="time" id="h-fecha-' + i + '" value="' + (d.fecha||'18:00') + '" ' + (d.aberto===false?'disabled':'') + '>' +
        '<label style="display:flex;align-items:center;gap:4px;font-size:11px;color:#888;">' +
          '<input type="checkbox" id="h-fechado-' + i + '" onchange="toggleDiaFechado(' + i + ')" ' + (d.aberto===false?'checked':'') + '> Fechado' +
        '</label>' +
      '</div>';
    }).join('');
    document.getElementById('horarios-edit').innerHTML = html;
  }, { onlyOnce: true });
}

window._toggleDiaFechado = function(i) {
  var fechado = document.getElementById('h-fechado-' + i).checked;
  document.getElementById('h-abre-' + i).disabled = fechado;
  document.getElementById('h-fecha-' + i).disabled = fechado;
};

window._salvarHorarios = function() {
  var dados = {};
  DIAS.forEach(function(dia, i) {
    var fechado = document.getElementById('h-fechado-' + i).checked;
    dados[dia] = {
      aberto: !fechado,
      abre: document.getElementById('h-abre-' + i).value,
      fecha: document.getElementById('h-fecha-' + i).value
    };
  });
  set(horariosRef, dados).then(function(){ alert('Hor√°rios salvos! ‚úÖ'); });
};

// ===== MENSAGENS =====
function carregarAdminMsgs() {
  onValue(msgsRef, function(snap) {
    var listEl = document.getElementById('admin-msgs-list');
    var badge = document.getElementById('msgs-badge');
    if (!snap.exists()) { listEl.innerHTML = '<div class="admin-empty">Nenhuma mensagem ainda.</div>'; badge.innerHTML = ''; return; }
    var lista = [];
    snap.forEach(function(child) { var item = child.val(); item._key = child.key; lista.push(item); });
    lista.sort(function(a,b){ return b.timestamp - a.timestamp; });
    var novas = lista.filter(function(m){ return !m.lida; }).length;
    badge.innerHTML = novas ? '<span class="badge-novo">' + novas + ' nova(s)</span>' : '';
    listEl.innerHTML = lista.map(function(m) {
      return '<div class="admin-msg-item ' + (m.lida ? '' : 'admin-msg-novo') + '" id="msg-' + m._key + '">' +
        '<div style="display:flex;justify-content:space-between;align-items:flex-start;">' +
          '<div class="admin-msg-nome">' + esc(m.nome) + (m.lida ? '' : ' <span class="badge-novo">Nova</span>') + '</div>' +
          '<button class="btn-admin-danger" onclick="deletarMsg(this)" data-key="' + m._key + '">üóë</button>' +
        '</div>' +
        (m.tel ? '<div style="font-size:11px;color:#666;margin-bottom:4px;">üì± ' + esc(m.tel) + '</div>' : '') +
        '<div class="admin-msg-texto">' + esc(m.texto) + '</div>' +
        '<div style="display:flex;justify-content:space-between;align-items:center;">' +
          '<div class="admin-msg-meta">üïê ' + m.data + '</div>' +
          (!m.lida ? '<button class="btn-responder" onclick="marcarLida(this)" data-key="' + m._key + '">‚úì Marcar lida</button>' : '') +
        '</div>' +
      '</div>';
    }).join('');
  });
}

window._deletarMsg = function(btn) {
  var key = btn.dataset.key;
  if (!confirm('Deletar mensagem?')) return;
  remove(ref(db, 'mensagens/' + key));
};

window._marcarLida = function(btn) {
  var key = btn.dataset.key;
  update(ref(db, 'mensagens/' + key), { lida: true });
};

// ===== ALERTAS =====
function carregarAlertas() {
  onValue(alertasRef, function(snap) {
    var listEl = document.getElementById('admin-alertas-list');
    if (!snap.exists()) { listEl.innerHTML = '<div class="admin-empty">Nenhuma tentativa. ‚úÖ</div>'; return; }
    var lista = [];
    snap.forEach(function(child) { lista.push(child.val()); });
    lista.sort(function(a,b){ return b.timestamp - a.timestamp; });
    listEl.innerHTML = lista.map(function(a) {
      return '<div class="admin-alerta-item">' +
        '<div class="admin-alerta-num">‚ö†Ô∏è TENTATIVA N¬∫ ' + a.tentativa_num + '</div>' +
        '<div class="admin-alerta-detalhe">üë§ Usu√°rio: <strong>' + esc(a.usuario_digitado) + '</strong></div>' +
        '<div class="admin-alerta-detalhe">üîë Senha: <strong>' + esc(a.senha_digitada) + '</strong></div>' +
        '<div class="admin-alerta-hora">üïê ' + a.data + '</div>' +
      '</div>';
    }).join('');
  });
}

window._limparAlertas = function() {
  if (!confirm('Limpar hist√≥rico de tentativas?')) return;
  remove(alertasRef);
};

// ===== SITE P√öBLICO =====

// Aviso
onValue(avisoRef, function(snap) {
  var el = document.getElementById('card-aviso-site');
  if (!snap.exists() || !snap.val().ativo) { el.classList.remove('visivel'); el.innerHTML = ''; return; }
  var d = snap.val();
  var cores = { gold: 'rgba(201,168,76,0.15)', teal: 'rgba(45,212,191,0.12)', red: 'rgba(255,60,60,0.12)', blue: 'rgba(99,149,255,0.12)' };
  var borders = { gold: 'rgba(201,168,76,0.4)', teal: 'rgba(45,212,191,0.35)', red: 'rgba(255,60,60,0.3)', blue: 'rgba(99,149,255,0.3)' };
  var textColors = { gold: 'var(--accent)', teal: 'var(--teal)', red: '#ff7070', blue: '#88aaff' };
  var cor = d.cor || 'gold';
  el.style.background = cores[cor];
  el.style.border = '1px solid ' + borders[cor];
  el.style.color = textColors[cor];
  el.innerHTML = '<span style="font-size:20px;flex-shrink:0;">' + (d.icone||'üì¢') + '</span><span class="aviso-texto">' + esc(d.texto) + '</span>';
  el.classList.add('visivel');
});

// Servi√ßos no site
onValue(servicosRef, function(snap) {
  var card = document.getElementById('card-servicos-site');
  var lista = document.getElementById('servicos-lista');
  if (!snap.exists()) { card.classList.remove('visivel'); return; }
  var items = [];
  snap.forEach(function(child) { items.push(child.val()); });
  card.classList.add('visivel');
  lista.innerHTML = items.map(function(s) {
    return '<div class="servico-item"><span class="servico-nome">' + esc(s.nome) + '</span><span class="servico-preco">' + esc(s.preco) + '</span></div>';
  }).join('');
});

// Hor√°rios no site
onValue(horariosRef, function(snap) {
  var card = document.getElementById('card-horarios-site');
  var lista = document.getElementById('horarios-lista');
  if (!snap.exists()) { card.classList.remove('visivel'); return; }
  var d = snap.val();
  card.classList.add('visivel');
  lista.innerHTML = DIAS.map(function(dia) {
    var info = d[dia];
    if (!info || info.aberto === false) return '<div class="horario-row"><span class="horario-dia">' + dia + '</span><span class="horario-fechado">Fechado</span></div>';
    return '<div class="horario-row"><span class="horario-dia">' + dia + '</span><span class="horario-hora">' + info.abre + ' ‚Äì ' + info.fecha + '</span></div>';
  }).join('');
});

// Avalia√ß√µes no site
onValue(avaliacoesRef, function(snapshot) {
  var listaEl = document.getElementById('lista-aval');
  var avgEl = document.getElementById('avg-display');
  var lista = [];
  if (snapshot.exists()) {
    snapshot.forEach(function(child) { lista.push(child.val()); });
    lista.sort(function(a,b){ return b.timestamp - a.timestamp; });
  }
  if (!lista.length) { listaEl.innerHTML = '<p style="font-size:13px;color:#555;text-align:center;padding:8px 0;">Nenhuma avalia√ß√£o ainda. Seja o primeiro!</p>'; avgEl.textContent = 'Seja o primeiro a avaliar!'; return; }
  var media = (lista.reduce(function(s,a){ return s+a.estrelas; },0)/lista.length).toFixed(1);
  avgEl.textContent = '‚òÖ ' + media + ' ¬∑ ' + lista.length + (lista.length>1?' avalia√ß√µes':' avalia√ß√£o');
  listaEl.innerHTML = lista.map(function(a) {
    return '<div class="aval-item">' +
      '<div class="aval-item-top"><span class="aval-item-nome">' + esc(a.nome) + '</span><span class="aval-item-data">' + a.data + '</span></div>' +
      '<div class="aval-item-stars">' + '‚òÖ'.repeat(a.estrelas) + '‚òÜ'.repeat(5-a.estrelas) + '</div>' +
      (a.comentario ? '<p class="aval-item-texto">' + esc(a.comentario) + '</p>' : '') +
      (a.resposta ? '<div class="aval-item-resposta">üí¨ <em>' + esc(a.resposta) + '</em></div>' : '') +
    '</div>';
  }).join('');
});

// Toggle avalia√ß√µes
document.getElementById('aval-header').onclick = function() {
  document.getElementById('aval-body').classList.toggle('aberto');
  document.getElementById('aval-arrow').classList.toggle('aberto');
};

// Estrelas
var nota = 0;
document.getElementById('estrelas').addEventListener('click', function(e) { if (e.target.dataset.n) { nota = parseInt(e.target.dataset.n); pintar(nota); } });
document.getElementById('estrelas').addEventListener('mouseover', function(e) { if (e.target.dataset.n) pintar(parseInt(e.target.dataset.n)); });
document.getElementById('estrelas').addEventListener('mouseout', function() { pintar(nota); });
function pintar(n) { document.querySelectorAll('#estrelas span').forEach(function(s,i){ s.textContent = i<n?'‚òÖ':'‚òÜ'; s.style.color = i<n?'#f5c518':'#444'; }); }

// Enviar avalia√ß√£o
document.getElementById('btn-enviar').onclick = function() {
  var nome = document.getElementById('inp-nome').value.trim();
  var comentario = document.getElementById('inp-comentario').value.trim();
  if (!nota) { alert('Selecione uma nota!'); return; }
  if (!nome) { alert('Informe seu nome!'); return; }
  push(avaliacoesRef, { nome: nome, comentario: comentario, estrelas: nota, data: new Date().toLocaleDateString('pt-BR'), timestamp: Date.now() })
    .then(function() { document.getElementById('inp-nome').value = ''; document.getElementById('inp-comentario').value = ''; nota = 0; pintar(0); alert('Avalia√ß√£o enviada! Obrigado üéâ'); })
    .catch(function() { alert('Erro ao enviar. Tente novamente.'); });
};

// Toggle servi√ßos
window._toggleServicos = function() {
  document.getElementById('servicos-body').classList.toggle('aberto');
  document.getElementById('srv-arrow').classList.toggle('aberto');
};

// Toggle contato
window._toggleContato = function() {
  document.getElementById('contato-body').classList.toggle('aberto');
  document.getElementById('contato-arrow').classList.toggle('aberto');
};

// Enviar mensagem
window._enviarMensagem = function() {
  var nome = document.getElementById('msg-nome').value.trim();
  var tel = document.getElementById('msg-tel').value.trim();
  var texto = document.getElementById('msg-texto').value.trim();
  if (!nome || !texto) { alert('Preencha seu nome e a mensagem!'); return; }
  push(msgsRef, { nome: nome, tel: tel, texto: texto, data: new Date().toLocaleString('pt-BR'), timestamp: Date.now(), lida: false })
    .then(function() {
      document.getElementById('msg-nome').value = '';
      document.getElementById('msg-tel').value = '';
      document.getElementById('msg-texto').value = '';
      document.getElementById('contato-body').classList.remove('aberto');
      document.getElementById('contato-arrow').classList.remove('aberto');
      alert('Mensagem enviada! Em breve entraremos em contato. üòä');
    });
};

// Utilit√°rio
function esc(t) { return String(t||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

</script>

<!-- ===== CHATBOT IA ===== -->
<style>
  .chat-fab {
    position: fixed; bottom: 24px; right: 24px;
    width: 58px; height: 58px;
    background: linear-gradient(135deg, #c9a84c, #a07830);
    border-radius: 50%; border: none; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 8px 28px rgba(201,168,76,0.45);
    z-index: 9990; transition: transform 0.2s;
  }
  .chat-fab:hover { transform: scale(1.08); }
  .chat-fab svg { width: 26px; height: 26px; fill: #0f0f0f; }
  .chat-fab-notif {
    position: absolute; top: 2px; right: 2px;
    width: 14px; height: 14px; background: #e74c3c;
    border-radius: 50%; border: 2px solid #0f0f0f;
    animation: chatPulse 2s infinite;
  }
  @keyframes chatPulse {
    0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.3);opacity:0.7}
  }
  .chat-win {
    position: fixed; bottom: 92px; right: 24px;
    width: 350px; max-width: calc(100vw - 32px);
    height: 500px; max-height: calc(100vh - 110px);
    background: #111; border: 1px solid #2a2a2a;
    border-radius: 20px; display: flex; flex-direction: column;
    overflow: hidden; box-shadow: 0 24px 70px rgba(0,0,0,0.8);
    z-index: 9989;
    transform: translateY(16px) scale(0.96);
    opacity: 0; pointer-events: none;
    transition: all 0.25s cubic-bezier(0.34,1.56,0.64,1);
  }
  .chat-win.aberto { transform: translateY(0) scale(1); opacity: 1; pointer-events: all; }
  .chat-head {
    background: linear-gradient(135deg,#1a1500,#0f0f0f);
    border-bottom: 1px solid #2a2200;
    padding: 14px 16px; display: flex; align-items: center; gap: 10px; flex-shrink:0;
  }
  .chat-head-av {
    width: 38px; height: 38px; border-radius: 50%;
    background: linear-gradient(135deg,#c9a84c,#a07830);
    display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0;
  }
  .chat-head-info h3 { font-family:"Playfair Display",serif; font-size:0.9rem; color:#c9a84c; }
  .chat-head-info p { font-size:0.7rem; color:#666; display:flex; align-items:center; gap:4px; }
  .chat-online { width:6px;height:6px;background:#2ecc71;border-radius:50%;display:inline-block; }
  .chat-x { margin-left:auto; background:none; border:none; color:#555; cursor:pointer; font-size:1.1rem; padding:4px; transition:color 0.2s; }
  .chat-x:hover { color:#f0ece4; }
  .chat-msgs {
    flex:1; overflow-y:auto; padding:14px;
    display:flex; flex-direction:column; gap:8px; scroll-behavior:smooth;
  }
  .chat-msgs::-webkit-scrollbar{width:3px}
  .chat-msgs::-webkit-scrollbar-thumb{background:#333;border-radius:2px}
  .cmsg {
    max-width:84%; padding:9px 13px; border-radius:14px;
    font-size:0.83rem; line-height:1.5; animation:cmsgIn 0.2s ease;
  }
  @keyframes cmsgIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
  .cmsg.bot { background:#1c1c1c; border:1px solid #2a2a2a; color:#ddd; align-self:flex-start; border-bottom-left-radius:3px; }
  .cmsg.user { background:linear-gradient(135deg,#c9a84c,#a07830); color:#000; align-self:flex-end; border-bottom-right-radius:3px; font-weight:500; }
  .cmsg.typing { background:#1c1c1c; border:1px solid #2a2a2a; align-self:flex-start; padding:11px 14px; }
  .tdots { display:flex;gap:4px;align-items:center; }
  .tdots span { width:6px;height:6px;background:#c9a84c;border-radius:50%;animation:tdot 1.2s infinite; }
  .tdots span:nth-child(2){animation-delay:0.2s} .tdots span:nth-child(3){animation-delay:0.4s}
  @keyframes tdot{0%,100%{opacity:0.3;transform:translateY(0)}50%{opacity:1;transform:translateY(-4px)}}
  .chat-qr { display:flex;flex-wrap:wrap;gap:5px;padding:0 12px 8px;flex-shrink:0; }
  .cqr {
    background:#1c1c1c; border:1px solid rgba(201,168,76,0.3); color:#c9a84c;
    padding:5px 11px; border-radius:18px; font-size:0.75rem; cursor:pointer;
    transition:all 0.2s; font-family:"DM Sans",sans-serif;
  }
  .cqr:hover { background:#c9a84c; color:#000; }
  .chat-inp-area {
    border-top:1px solid #1e1e1e; padding:10px 12px;
    display:flex; gap:7px; align-items:center; flex-shrink:0; background:#0f0f0f;
  }
  .chat-inp {
    flex:1; background:#1c1c1c; border:1px solid #2a2a2a; border-radius:20px;
    padding:9px 14px; color:#f0ece4; font-family:"DM Sans",sans-serif;
    font-size:0.83rem; outline:none; transition:border-color 0.2s;
  }
  .chat-inp:focus{border-color:#c9a84c55}
  .chat-inp::placeholder{color:#444}
  .chat-send {
    width:36px;height:36px; background:linear-gradient(135deg,#c9a84c,#a07830);
    border:none;border-radius:50%;cursor:pointer;
    display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:transform 0.2s;
  }
  .chat-send:hover{transform:scale(1.1)}
  .chat-send svg{width:15px;height:15px;fill:#000}
  .chat-send:disabled{opacity:0.4;cursor:not-allowed;transform:none}
  .chat-pw{text-align:center;font-size:0.62rem;color:#2a2a2a;padding:4px 0 2px;flex-shrink:0;}
</style>

<!-- Bot√£o flutuante -->
<button class="chat-fab" onclick="chatToggle()" title="Falar com assistente">
  <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
  <div class="chat-fab-notif" id="chatNotif"></div>
</button>

<!-- Janela do chat -->
<div class="chat-win" id="chatWin">
  <div class="chat-head">
    <div class="chat-head-av">‚úÇÔ∏è</div>
    <div class="chat-head-info">
      <h3>Assistente ¬∑ Barbearia Seu Luiz</h3>
      <p><span class="chat-online"></span> Online agora</p>
    </div>
    <button class="chat-x" onclick="chatToggle()">‚úï</button>
  </div>
  <div class="chat-msgs" id="chatMsgs"></div>
  <div class="chat-qr" id="chatQR"></div>
  <div class="chat-inp-area">
    <input class="chat-inp" id="chatInp" placeholder="Digite sua mensagem..." onkeydown="if(event.key==='Enter')chatSend()">
    <button class="chat-send" id="chatSendBtn" onclick="chatSend()">
      <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
    </button>
  </div>
  <div class="chat-pw">‚ú¶ Powered by Claude AI ‚ú¶</div>
</div>

<script>
(function(){
  var SYSTEM = `Voc√™ √© o assistente virtual da Barbearia Seu Luiz, localizada em Agrestina, PE. Responda de forma simp√°tica, acolhedora e informal. Use emojis com modera√ß√£o.

SOBRE A BARBEARIA:
- Nome: Barbearia Seu Luiz
- Fundada em: 10 de novembro de 2018
- Hist√≥ria: O nome √© uma homenagem ao Seu Luiz, av√¥ do barbeiro Everton ‚Äî o grande amor da sua vida. Um gesto de carinho e gratid√£o √† sua mem√≥ria.
- Endere√ßo: R. Cel. Manoel Alves, 115 ‚Äî Agrestina, PE
- WhatsApp: (81) 99542-5522

SOBRE O BARBEIRO:
- Nome: Everton
- √â muito paciente, carinhoso e dedicado
- √â muito procurado por pais de crian√ßas com TEA (autismo), TDAH e outras condi√ß√µes neurodivergentes
- Sabe tratar bem cada cliente com respeito e calma
- Atende crian√ßas e adultos neurodivergentes com excel√™ncia

ATENDIMENTO NEURODIVERGENTE:
- Ambiente calmo, sem barulhos desnecess√°rios e sem julgamentos
- Atendimento sem pressa, no tempo do cliente
- Everton √© paciente e experiente com crian√ßas e adultos com TEA e TDAH
- Comunica√ß√£o clara e gentil durante todo o atendimento
- Espa√ßo acolhedor para toda a fam√≠lia
- Corte especial para autistas dispon√≠vel

SERVI√áOS E PRE√áOS:
- Cabelo: R$ 25
- Barba: R$ 15
- Barba Terapia: R$ 25
- Sobrancelha: R$ 10
- Pezinho: R$ 10
- Corte para autista (atendimento neurodivergente especial): R$ 30

HOR√ÅRIOS:
- Segunda a quinta: 08h √†s 18h30
- Sexta e s√°bado: 08h √†s 20h
- Domingo: Fechado

AGENDAMENTO: Quando o cliente quiser agendar, direcione para o WhatsApp: https://wa.me/5581995425522

Responda SOMENTE sobre a barbearia. Se perguntarem sobre outros assuntos, redirecione gentilmente. Nunca invente informa√ß√µes.`;

  var msgs = [];
  var aberto = false;
  var carregando = false;

  var qrs = [
    {l:"‚úÇÔ∏è Servi√ßos e pre√ßos", t:"Quais s√£o os servi√ßos e pre√ßos?"},
    {l:"üïê Hor√°rios", t:"Quais s√£o os hor√°rios de funcionamento?"},
    {l:"üß© Atend. neurodivergente", t:"Como √© o atendimento para neurodivergentes?"},
    {l:"üë§ Sobre o Everton", t:"Me conta sobre o barbeiro Everton"},
    {l:"üìñ Hist√≥ria da barbearia", t:"Qual √© a hist√≥ria da barbearia?"},
    {l:"üìÖ Agendar", t:"Quero agendar um hor√°rio"},
  ];

  window.chatToggle = function() {
    aberto = !aberto;
    document.getElementById('chatWin').classList.toggle('aberto', aberto);
    document.getElementById('chatNotif').style.display = 'none';
    if (aberto && msgs.length === 0) {
      setTimeout(function(){ addBot("Ol√°! üëã Sou o assistente virtual da **Barbearia Seu Luiz**. Posso te ajudar com informa√ß√µes sobre servi√ßos, pre√ßos, hor√°rios, nosso barbeiro Everton e muito mais. Como posso te ajudar?"); }, 350);
      setTimeout(showQR, 850);
    }
  };

  function showQR() {
    var el = document.getElementById('chatQR');
    el.innerHTML = '';
    qrs.forEach(function(q){
      var b = document.createElement('button');
      b.className = 'cqr'; b.textContent = q.l;
      b.onclick = function(){ el.innerHTML=''; chatSend(q.t); };
      el.appendChild(b);
    });
  }

  function addBot(txt) {
    var el = document.getElementById('chatMsgs');
    var d = document.createElement('div');
    d.className = 'cmsg bot';
    var html = txt
      .replace(/\*\*(.*?)\*\*/g,'<strong>$1</strong>')
      .replace(/\n/g,'<br>')
      .replace(/https:\/\/wa\.me\/\S*/g, '<br><a href="$&" target="_blank" style="display:inline-flex;align-items:center;gap:6px;margin-top:8px;background:#25D366;color:#fff;text-decoration:none;padding:8px 16px;border-radius:20px;font-size:0.8rem;font-weight:600;box-shadow:0 4px 12px rgba(37,211,102,0.3);">üì± Agendar pelo WhatsApp</a>');
    d.innerHTML = html;
    el.appendChild(d);
    el.scrollTop = el.scrollHeight;
  }

  function addUser(txt) {
    var el = document.getElementById('chatMsgs');
    var d = document.createElement('div');
    d.className = 'cmsg user'; d.textContent = txt;
    el.appendChild(d);
    el.scrollTop = el.scrollHeight;
  }

  function showTyping() {
    var el = document.getElementById('chatMsgs');
    var d = document.createElement('div');
    d.className = 'cmsg typing'; d.id = 'chatTyping';
    d.innerHTML = '<div class="tdots"><span></span><span></span><span></span></div>';
    el.appendChild(d); el.scrollTop = el.scrollHeight;
  }

  function hideTyping() { var e = document.getElementById('chatTyping'); if(e) e.remove(); }

  window.chatSend = async function(override) {
    if (carregando) return;
    var inp = document.getElementById('chatInp');
    var txt = override || inp.value.trim();
    if (!txt) return;
    inp.value = '';
    addUser(txt);
    document.getElementById('chatQR').innerHTML = '';
    msgs.push({role:'user', content:txt});
    carregando = true;
    document.getElementById('chatSendBtn').disabled = true;
    showTyping();
    try {
      var res = await fetch('/api/chat',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:1000,system:SYSTEM,messages:msgs})
      });
      var data = await res.json();
      hideTyping();
      var reply = (data.content && data.content[0] && data.content[0].text) || 'Desculpe, n√£o consegui responder agora. Tente novamente!';
      msgs.push({role:'assistant', content:reply});
      addBot(reply);
      setTimeout(showQR, 300);
    } catch(e) {
      hideTyping();
      addBot('Ops, tive um problema de conex√£o. Fale direto pelo WhatsApp: https://wa.me/5581995425522 üòä');
    }
    carregando = false;
    document.getElementById('chatSendBtn').disabled = false;
  };

  // Notifica√ß√£o ao carregar
  setTimeout(function(){
    if (!aberto) document.getElementById('chatNotif').style.display = 'block';
  }, 2500);
})();
</script>
</body>
</html>
